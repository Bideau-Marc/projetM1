<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="style.css">
<title>Netflix</title>
</head>
<body>
<div class="showcase">
    <div class="logo">
        <img src="./../assets/netflix_violet.png" width="329px" height="88px">
    </div>

    <div class="showcase-content">
        <div class="formm">
            <form>
                <h2>S'identifier</h2>
                <div class="info">
                    <input class="email" type="" placeholder="Email" id="email"> <br>
                    <input class="email" type="password" placeholder="Password" id="mdp">
                </div>
                <div class="btnCo">
                    <a onclick="connexion()"><div class="btn-primary">Connexion</div></a>
                </div>
                <div class="help">
                    <div class="signup">
                        <p>Nouveau sur Netflix ?</p>
                        <a href="inscription.html">S'inscrire maintenant</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>
<script>
    function connexion()
  {
    var login = document.getElementById("email").value;
    var mdp = document.getElementById("mdp").value;
    let data = JSON.stringify({
        name: login,
        mdp: mdp
    });
    connexionurl = 'http://localhost/projetM1/projet_Netflix/Controleur/connexionUser.php';
    
    fetch(connexionurl,
    {
        headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
        },
        method: "POST",
        body: data
    })
    .then(function (response) {
        //console.log('reponse',response  ,"response",response)
        return response.json();
    })
    .then(function (myJson) {
        if (myJson[0].state == "permited") {
            document.location.href = "./accueil.html"; 
        }
    })
    
  }
    
</script>