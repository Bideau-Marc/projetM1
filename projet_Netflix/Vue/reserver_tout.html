<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Netflix</title>
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script defer src="https://use.fontawesome.com/releases/v5.1.0/js/all.js" integrity="sha384-3LK/3kTpDE/Pkp8gTNp2gR/2gOiwQ6QaO7Td0zV76UFJVhqLl4Vl3KL1We6q6wR9" crossorigin="anonymous"></script>
</head>
<body>
  <div class="wrapper">

    <!-- HEADER -->
    <header>
      <div class="netflixLogo">
        <a id="logo" href="accueil.html#home"><img src="../assets/netflix_violet.png" alt="Logo Image"></a>
      </div>      
      <nav class="main-nav">                
        <a href="accueil.html">Films/Séries</a>
        <a href="reserver_tout.html">Séances</a>
        <a href=""></a>
      </nav>
      <nav class="sub-nav">
        <a href="#"><i class=""></i></a>
        <a href="#"><i class=""></i></a>
        <a href="./reserve.html">Compte</a>        
      </nav>      
    </header>
    <!-- END OF HEADER -->
    
    <!-- MAIN CONTAINER -->
    <section class="main-container" >
      <h1 id="Recommandation">Séances</h1>
      <section class="film-reserve" id="r1">
        <h1 class="title">Dune</h1>
        <p class="pitch-subtitle">Séance réservée le lundi 15 novembre 15h06</p>
        <button class="btn" onclick="annuler('r1')">Annuler la séance ❌</button>
      </section>
      <section class="film-reserve" id="r2">
        <h1 class="title">Super-héros</h1>
        <p class="pitch-subtitle">Séance réservée le Samedi 20 novembre 20H31</p>
        <button class="btn" onclick="annuler('r2')">Annuler la séance ❌</button>
      </section>
    </section>

    <div id="overlay" class="overlay">
      <div id="popup" class="popup">
        <h2>
        Dune
        <span id="btnClose" class="btnClose">&times;</span>
        </h2>
        <div class="box bottom">
          <a onclick="changerCouleur()" id="a1">Lundi 15 novembre 15h06</a>
          <a>Lundi 15 novembre 15h06</a>
          <a>Lundi 18 novembre 15h06</a>
          <a>Lundi 15 novembre 15h06</a>
          <a>Lundi 15 novembre 15h06</a>
          <a>Lundi 15 novembre 15h06</a>
          <a>Lundi 15 novembre 15h06</a>
      </div>
      </div>
    </div>

    <footer>
      <a href="./contact.html" class="flooter">Contact ☎️</a>
    </footer>
  </div>
</body>
</html>
<script>
  function changerCouleur()
  {
    var property = document.getElementById("a1");
    property.textContent += " ✅";
    property.style.backgroundColor = "#FFFFFF";
    property.style.color = "#000000";
  }
  var btnPopup = document.getElementById('id1');
  var overlay = document.getElementById('overlay');
  btnPopup.addEventListener('click',openMoadl);
  function openMoadl() {
    document.location.href="./reserver.html";
  }
  var btnClose = document.getElementById('btnClose');
  btnClose.addEventListener('click',closeModal);
  function closeModal() {
    overlay.style.display='none';
  }
  getSeances ='http://localhost/projetm1/projet_Netflix/Controleur/getSeance.php';
  fetch(getSeances)
  .then(function (response) {
      //console.log('reponse',getFilm,"response",response)
    return response.json();
  })
  .then(function (myJson) {
    //console.log(myJson,"ip",myJson);
    myJson.forEach(element => {
      console.log(element,"jesuisle5emeElmeent");
      let a  = document.createElement('a');
      let img  = document.createElement('img');
      img.src = element.lien;
      a.append(img);
      a.href='watch.html'+"?film="+element.id;
      document.getElementById("films").append(a);
  });
  })
  .catch(function (error) {
    console.log("Error: " + error);
  });
</script>